[build]
  command = "corepack enable && pnpm install --frozen-lockfile && pnpm run build"
  publish = "dist"

[build.environment]
  NODE_VERSION = "18"

[build.processing]
  skip_processing = false

[build.processing.css]
  bundle = true
  minify = true

[build.processing.js]
  bundle = true
  minify = true

[build.processing.images]
  optimize = true

[dev]
  command = "pnpm start"
  port = 3000
  autoLaunch = true

[template]
  incoming-hooks = ["Contentful"]
  required-extensions = ["supabase"]

[template.onboarding]
  instructions = """
Welcome to your new Express + Supabase project!
1. Replace the SUPABASE_URL and SUPABASE_KEY in [template.environment].
2. Set your SESSION_SECRET to a secure random string.
"""
