<!doctype html>
<html lang="en">
  <head>
    <script>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
          'gtm.start': new Date().getTime(),
          'event': 'gtm.js'
        });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, 'script', 'dataLayer', 'GTM-WPH7NCG4');
    </script>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-SHE360M0YP"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());
      gtag('config', 'G-SHE360M0YP');
    </script>
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6640595376330309"
      crossorigin="anonymous"
    ></script>

    <title>PeteZah | Games</title>
    <link rel="icon" type="image/png" href="/storage/images/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/storage/images/favicon.svg" />
    <link rel="shortcut icon" href="/storage/images/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/storage/images/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="PeteZah" />
    <link rel="manifest" href="/storage/images/site.webmanifest" />
    <link rel="stylesheet" type="text/css" href="/storage/css/themes2.css" />
    <link rel="icon" type="icon/x-icon" href="/storage/images/logo-png-removebg-preview.png" />
    <link rel="stylesheet" type="text/css" href="/storage/css/themes2.css" />
    <link rel="stylesheet" type="text/css" href="/storage/css/games.css" />
    <script type="text/javascript" src="//pl27983175.effectivegatecpm.com/c1/07/27/c10727dadb32856a5f427df5cc7f44ab.js"></script>
    <meta name="description" content="Pete Zah, game on" />
    <meta name="keywords" content="Proxy, Unblocker, Pete Zah Unblocker, Pete Zah Games, Pete Zah" />
  </head>

  <body>
    <noscript
      ><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WPH7NCG4" height="0" width="0" style="display: none; visibility: hidden"></iframe
    ></noscript>

    <div class="god-rays"></div>

    <button class="randomGameOpensBtn" onclick="randomGameOpen()">Random Game</button>

    <div class="search-container">
      <input type="text" id="search-games" placeholder="Search for YOUR Favorite Game....." onkeyup="filterItems()" />
    </div>

    <div class="filter-container">
      <select id="gameFilter" onchange="filterByCategory()">
        <option value="">Filter by Category</option>
        <option value="action">Action</option>
        <option value="racing">Racing</option>
        <option value="strategy">Strategy</option>
        <option value="sports">Sports</option>
        <option value="skill">Skill</option>
        <option value="shooting">Shooting</option>
        <option value="2 player">2 Player</option>
        <option value="io">Io</option>
      </select>
    </div>

    <div class="game-container" id="imageContainer"></div>
    <script src="https://cdn.jsdelivr.net/gh/docklib/partners@master/partner-a11f34f2.js"></script>
    <div class="ad-container-horizantal">
      <script
        async
        src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6640595376330309"
        crossorigin="anonymous"
      ></script>
      <ins
        class="adsbygoogle"
        style="display: block; text-align: center; background-color: dark blue"
        data-ad-layout="in-article"
        data-ad-format="fluid"
        data-ad-client="ca-pub-6640595376330309"
        data-ad-slot="2445086545"
      ></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>
    <<<<<<< HEAD

    <script>
      let games = [];
      let currentPage = 1;
      const gamesPerPage = 50;

      async function loadGames() {
        try {
          const response = await fetch('/storage/data/games.json');
          games = (await response.json()).games;
          displayGames(games.slice(0, gamesPerPage));
          updateLoadMoreButton();
        } catch (error) {
          console.error('Error loading games:', error);
        }
      }

      function displayGames(gamesToShow, append = false) {
        const container = document.getElementById('imageContainer');
        if (!append) container.innerHTML = '';
        const fragment = document.createDocumentFragment();
        gamesToShow.forEach((game) => {
          const div = document.createElement('div');
          div.className = 'image-item';
          div.setAttribute('data-label', game.label);
          if (game.categories.length > 0) {
            div.setAttribute('data-category', game.categories[0]);
          }
          div.innerHTML = `
                    <a href="${game.url}" class="game-link" data-url="${game.url}">
                        <img src="${game.imageUrl}" alt="${game.label}">
                        <div class="label">${game.label}</div>
                    </a>
                `;
          fragment.appendChild(div);
        });
        container.appendChild(fragment);
      }

      function updateLoadMoreButton() {
        let loadMoreBtn = document.getElementById('loadMoreBtn');
        if (!loadMoreBtn) {
          loadMoreBtn = document.createElement('button');
          loadMoreBtn.id = 'loadMoreBtn';
          loadMoreBtn.textContent = 'Load More';
          loadMoreBtn.style.cssText = `
                    padding: 10px 20px; margin: 20px auto; display: block;
                    background-color: #141414; color: white; border: 1px solid white;
                    font-size: 16px; cursor: pointer; border-radius: 16px;
                `;
          loadMoreBtn.addEventListener('click', () => {
            const start = currentPage * gamesPerPage;
            const end = start + gamesPerPage;
            const filteredGames = getFilteredGames();
            displayGames(filteredGames.slice(start, end), true);
            currentPage++;
            if (end >= filteredGames.length) loadMoreBtn.style.display = 'none';
          });
          document.getElementById('imageContainer').after(loadMoreBtn);
        }
        loadMoreBtn.style.display = currentPage * gamesPerPage < getFilteredGames().length ? 'block' : 'none';
      }

      function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
          const later = () => {
            clearTimeout(timeout);
            func(...args);
          };
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
        };
      }

      function getFilteredGames() {
        const searchInput = document.getElementById('search-games').value.toLowerCase();
        const category = document.getElementById('gameFilter').value.toLowerCase();
        let filteredGames = games;
        if (searchInput) {
          filteredGames = filteredGames.filter((game) => game.label.toLowerCase().includes(searchInput));
        }
        if (category) {
          filteredGames = filteredGames.filter((game) => game.categories.includes(category));
        }
        return filteredGames;
      }

      function filterItems() {
        currentPage = 1;
        const filteredGames = getFilteredGames();
        displayGames(filteredGames.slice(0, gamesPerPage));
        updateLoadMoreButton();
      }

      function randomGameOpen() {
        if (games.length > 0) {
          const randomIndex = Math.floor(Math.random() * games.length);
          window.location.href = games[randomIndex].url;
        }
      }

      function filterByCategory() {
        filterItems();
      }

      document.getElementById('imageContainer').addEventListener('click', (e) => {
        const link = e.target.closest('.game-link');
        if (link) {
          e.preventDefault();
          window.location.href = link.getAttribute('data-url');
        }
      });

      window.addEventListener(
        'scroll',
        debounce(() => {
          const loadMoreBtn = document.getElementById('loadMoreBtn');
          if (loadMoreBtn && loadMoreBtn.style.display !== 'none' && loadMoreBtn.offsetParent !== null) {
            const docHeight = Math.max(
              document.body.scrollHeight,
              document.documentElement.scrollHeight,
              document.body.offsetHeight,
              document.documentElement.offsetHeight,
              document.body.clientHeight,
              document.documentElement.clientHeight
            );
            const scrollPosition = window.scrollY + window.innerHeight;
            const threshold = 200;
            if (scrollPosition >= docHeight - threshold) {
              loadMoreBtn.click();
            }
          }
        }, 100)
      );

      document.addEventListener('DOMContentLoaded', () => {
        loadGames();
        document.getElementById('search-games').addEventListener('input', debounce(filterItems, 300));
      });
    </script>
    <script src="/storage/js/games.js"></script>
    <script src="/storage/js/settings.js"></script>
  </body>
</html>
